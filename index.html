<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
</html>
<script>
  var list = [
    { id: 1, name: "部门A", parentId: 0 },
    { id: 3, name: "部门C", parentId: 1 },
    { id: 4, name: "部门D", parentId: 1 },
    { id: 5, name: "部门E", parentId: 2 },
    { id: 6, name: "部门F", parentId: 3 },
    { id: 7, name: "部门G", parentId: 2 },
    { id: 8, name: "部门H", parentId: 4 },
  ];
  function convert(list) {
    const map = list.reduce((acc, item) => {
      acc[item.id] = item;
      return acc;
    }, {});
    console.log("map", map);
    let result = null;
    for (const key in map) {
      const item = map[key];
      if (item.parentId === 0) {
        console.log("我是大哥", item, result);
        result = item;
      } else {
        const parent = map[item.parentId];
        if (parent) {
          parent.children = parent.children || [];
          parent.children.push(item);
        }
      }
    }
    console.log(111, map, result);
    return result;
  }
  let result = convert(list);
  console.log(result);
</script>
